{"mappings":"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","sources":["packages/react/label/src/index.ts","packages/react/label/src/Label.tsx"],"sourcesContent":["export {\n  Label,\n  //\n  Root,\n  //\n  useLabelContext,\n} from './Label';\nexport type { LabelProps } from './Label';\n","import * as React from 'react';\nimport { createContext } from '@radix-ui/react-context';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { Primitive } from '@radix-ui/react-primitive';\nimport { useId } from '@radix-ui/react-id';\n\nimport type * as Radix from '@radix-ui/react-primitive';\n\n/* -------------------------------------------------------------------------------------------------\n * Label\n * -----------------------------------------------------------------------------------------------*/\n\nconst NAME = 'Label';\n\ntype LabelContextValue = { id?: string; controlRef: React.MutableRefObject<HTMLElement | null> };\nconst [LabelProvider, useLabelContextImpl] = createContext<LabelContextValue>(NAME, {\n  id: undefined,\n  controlRef: { current: null },\n});\n\ntype LabelElement = React.ElementRef<typeof Primitive.span>;\ntype PrimitiveSpanProps = Radix.ComponentPropsWithoutRef<typeof Primitive.span>;\ninterface LabelProps extends PrimitiveSpanProps {\n  htmlFor?: string;\n}\n\nconst Label = React.forwardRef<LabelElement, LabelProps>((props, forwardedRef) => {\n  const { htmlFor, id: idProp, ...labelProps } = props;\n  const controlRef = React.useRef<HTMLElement | null>(null);\n  const ref = React.useRef<HTMLSpanElement>(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const id = useId(idProp);\n\n  React.useEffect(() => {\n    if (htmlFor) {\n      const element = document.getElementById(htmlFor);\n      const label = ref.current;\n      if (label && element) {\n        const getAriaLabel = () => element.getAttribute('aria-labelledby');\n        const ariaLabelledBy = [id, getAriaLabel()].filter(Boolean).join(' ');\n        element.setAttribute('aria-labelledby', ariaLabelledBy);\n        controlRef.current = element;\n        return () => {\n          /**\n           * We get the latest attribute value because at the time that this cleanup fires,\n           * the values from the closure may have changed.\n           */\n          const ariaLabelledBy = getAriaLabel()?.replace(id, '');\n          if (ariaLabelledBy === '') {\n            element.removeAttribute('aria-labelledby');\n          } else if (ariaLabelledBy) {\n            element.setAttribute('aria-labelledby', ariaLabelledBy);\n          }\n        };\n      }\n    }\n  }, [id, htmlFor]);\n\n  return (\n    <LabelProvider id={id} controlRef={controlRef}>\n      <Primitive.span\n        role=\"label\"\n        id={id}\n        {...labelProps}\n        ref={composedRefs}\n        onMouseDown={(event) => {\n          props.onMouseDown?.(event);\n          // prevent text selection when double clicking label\n          if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n        }}\n        onClick={(event) => {\n          props.onClick?.(event);\n          if (!controlRef.current || event.defaultPrevented) return;\n          const isClickingControl = controlRef.current.contains(event.target as Node);\n          // Ensure event was generated by a user action\n          // https://developer.mozilla.org/en-US/docs/Web/API/Event/isTrusted\n          const isUserClick = event.isTrusted === true;\n          /**\n           * When a label is wrapped around the control it labels, we trigger the appropriate events\n           * on the control when the label is clicked. We do nothing if the user is already clicking the\n           * control inside the label.\n           */\n          if (!isClickingControl && isUserClick) {\n            controlRef.current.click();\n            controlRef.current.focus();\n          }\n        }}\n      />\n    </LabelProvider>\n  );\n});\n\nLabel.displayName = NAME;\n\n/* -----------------------------------------------------------------------------------------------*/\n\nconst useLabelContext = (element?: HTMLElement | null) => {\n  const context = useLabelContextImpl('LabelConsumer');\n  const { controlRef } = context;\n\n  React.useEffect(() => {\n    if (element) controlRef.current = element;\n  }, [element, controlRef]);\n\n  return context.id;\n};\n\nconst Root = Label;\n\nexport {\n  Label,\n  //\n  Root,\n  //\n  useLabelContext,\n};\nexport type { LabelProps };\n"],"names":["Label","Root","useLabelContext","React","createContext","useComposedRefs","Primitive","useId","NAME","LabelProvider","useLabelContextImpl","id","undefined","controlRef","current","forwardRef","props","forwardedRef","htmlFor","idProp","labelProps","useRef","ref","composedRefs","useEffect","element","document","getElementById","label","getAriaLabel","getAttribute","ariaLabelledBy","filter","Boolean","join","setAttribute","replace","removeAttribute","event","onMouseDown","defaultPrevented","detail","preventDefault","onClick","isClickingControl","contains","target","isUserClick","isTrusted","click","focus","context"],"version":3,"file":"index.js.map"}